<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        a,
        img {
            border: 0;
            text-decoration: none;
        }

        body {
            font: 12/180% Arial, Helvetica, sans-serif, "新宋体"
        }
    </style>
    <link rel="stylesheet" type="text/css" href="1.css" />
    <script src="tools.js"></script>
    <script>
        window.onload = function () {
            // 当div具有collapsed这个类就折叠
            // 点击菜单切换菜单显示状态
            // 获取所有clss为menuSpan的元素
            var menuSpan = document.querySelectorAll(".menuSpan");
            // 为span绑定单击响应函数
            for (var i = 0; i < menuSpan.length; i++) {
                // 在这写这个的父元素可以给每个都加上类名
                // 写在点击事件里就不行因为点击的是单个
                // menuSpan[i].parentNode.className = 'collapsed';
                menuSpan[i].onclick = function () {
                    // 先声明然后给每一个遍历才可以给类赋值
                    var span = document.getElementsByTagName("span")
                    // 点击事件之后才遍历的所以刷新网页第一个没类名所以不折叠
                    for (var i = 0; i < span.length; i++) {
                        //点击一个开启别的折叠
                        span[i].parentNode.className = 'collapsed';
                    }
                    // 获取当前span的父元素div
                    var parentDiv = this.parentNode;
                    //切换类之前，获取元素高度
                    var begin = parentDiv.offsetHeight;
                    // 有类名就去掉，没有就加上
                    if (this.getAttribute('self') == 'true') {
                        this.setAttribute('self', false)
                        parentDiv.className = "collapsed";
                    } else {
                        this.setAttribute('self', true)
                        parentDiv.className = "";
                    }
                    //切换类之后，获取元素高度
                    var end = parentDiv.offsetHeight;
                    // 过渡
                    parentDiv.style.height = begin + "px";
                    move(parentDiv,"height",end,10,function(){
                        //  动画执行完毕内联样式已经没有存在的意义了
                        parentDiv.style.height = "";
                    })

                }
            }

        }

    </script>
</head>

<body>
    <div id="my_menu" class="sdmenu">
        <div class="">
            <span class="menuSpan">在线工具</span>
            <a href="#">图像优化</a>
            <a href="#">收藏夹图标生成器</a>
            <a href="#">邮件</a>
            <a href="#">htaccess密码</a>
            <a href="#">梯度图像</a>
            <a href="#">按钮生成器</a>
        </div>
        <div class="collapsed">
            <span class="menuSpan">支持我们</span>
            <a href="#">推荐我们</a>
            <a href="#">链接我们</a>
            <a href="#">网络资源</a>
        </div>
        <div class="collapsed">
            <span class="menuSpan">合作伙伴</span>
            <a href="#">JavaScript工具包</a>
            <a href="#">css驱动</a>
            <a href="#">codingforums</a>
            <a href="#">css例子</a>
        </div>
        <div class="collapsed">
            <span class="menuSpan">测试电流</span>
            <a href="#">图像优化</a>
            <a href="#">收藏夹图标生成器</a>
            <a href="#">邮件</a>
            <a href="#">htaccess密码</a>
        </div>



    </div>
</body>

</html>